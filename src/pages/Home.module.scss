/**
 * Home.module.scss
 * Home 页面样式定义
 * 采用 CSS Modules 模式，避免全局污染
 */

// 色彩变量
$color-primary: #2563eb; // 蓝色
$color-primary-dark: #1d4ed8;
$color-bg-light: #fafafa; // zinc-50
$color-bg-dark: #09090b; // zinc-900
$color-bg-card-light: #ffffff;
$color-bg-card-dark: #27272a; // zinc-800
$color-border-light: #e4e4e7; // zinc-200
$color-border-dark: #3f3f46; // zinc-700
$color-border-hover: #a1a1aa; // zinc-300
$color-border-hover-dark: #52525b; // zinc-600
$color-text-primary: #18181b; // zinc-900
$color-text-primary-dark: #fafafa;
$color-text-secondary: #71717a; // zinc-500
$color-text-secondary-dark: #a1a1aa; // zinc-400
$color-text-tertiary: #a1a1aa; // zinc-400
$color-text-tertiary-dark: #71717a; // zinc-500
$color-red: #ef4444;
$color-red-hover: #dc2626;

// 间距变量
$spacing-1: 0.25rem;
$spacing-2: 0.5rem;
$spacing-3: 0.75rem;
$spacing-4: 1rem;
$spacing-6: 1.5rem;
$spacing-8: 2rem;

// 圆角变量
$radius-lg: 0.75rem; // rounded-lg
$radius-xl: 1rem; // rounded-xl

// 过渡变量
$duration-200: 200ms;
$duration-300: 300ms;
$easing-in-out: ease-in-out;

// 主容器
.container {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  gap: $spacing-8;
  padding: $spacing-4;
  background-color: $color-bg-light;
  color: $color-text-primary;
  transition: background-color $duration-300, color $duration-300;

  &.dark {
    background-color: $color-bg-dark;
    color: $color-text-primary-dark;
  }
}

// 顶部操作栏
.header {
  position: absolute;
  top: $spacing-4;
  right: $spacing-4;
  display: flex;
  gap: $spacing-2;

  button {
    padding: $spacing-2;
    border-radius: 50%;
    transition: background-color $duration-300;
    background-color: transparent;
    color: $color-text-secondary;
    border: none;
    cursor: pointer;

    &:hover {
      background-color: #e4e4e7; // zinc-200
    }

    .dark & {
      color: $color-text-secondary-dark;

      &:hover {
        background-color: #27272a; // zinc-800
      }
    }

    svg {
      width: 24px;
      height: 24px;
    }
  }
}

// 欢迎区域
.welcome {
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: $spacing-2;

  .logoWrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $spacing-3;
    margin-bottom: $spacing-4;

    .logoBg {
      padding: $spacing-3;
      background-color: rgb(59 130 246 / 0.1); // blue-500/10
      border-radius: $radius-xl;

      img {
        width: 3rem;
        height: 3rem;
      }
    }
  }

  .title {
    font-size: 2.25rem; // text-4xl
    font-weight: 700;
    background: linear-gradient(to right, #60a5fa, #a855f7); // from-blue-400 to-purple-500
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .subtitle {
    color: $color-text-secondary;

    .dark & {
      color: $color-text-secondary-dark;
    }
  }
}

// 操作卡片
.actionCard {
  width: 100%;
  max-width: 28rem; // max-w-md
  background-color: $color-bg-card-light;
  border: 1px solid $color-border-light;
  border-radius: $radius-xl;
  overflow: hidden;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); // shadow-xl
  transition: background-color $duration-300, border-color $duration-300;

  &.dark {
    background-color: $color-bg-card-dark;
    border-color: $color-border-dark;
  }

  .cardHeader {
    padding: $spacing-6 $spacing-6 0;

    .cardTitle {
      font-size: 1.125rem; // text-lg
      font-weight: 700;
    }

    .cardSubtitle {
      font-size: 0.875rem; // text-sm
      color: $color-text-secondary;
      margin-top: $spacing-2;

      .dark & {
        color: $color-text-secondary-dark;
      }
    }
  }

  .cardContent {
    padding: $spacing-6;
    display: flex;
    flex-direction: column;
    gap: $spacing-4;
  }

  .cardFooter {
    padding: $spacing-4;
    border-top: 1px solid $color-border-light;
    background-color: #f4f4f5; // zinc-100
    display: flex;
    justify-content: flex-end;
    gap: $spacing-3;

    .dark & {
      background-color: rgb(39 39 42 / 0.5); // zinc-900/50
      border-color: $color-border-dark;
    }
  }
}

// 按钮样式
.button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: $spacing-2;
  font-weight: 600;
  padding: $spacing-3 $spacing-4;
  border-radius: $radius-lg;
  border: none;
  cursor: pointer;
  transition: all $duration-300 $easing-in-out;

  svg {
    width: 20px;
    height: 20px;
  }

  // 主按钮（创建项目）
  &.primary {
    width: 100%;
    background-color: $color-primary;
    color: white;

    &:hover {
      background-color: $color-primary-dark;
    }
  }

  // 副按钮（导入项目）
  &.secondary {
    width: 100%;
    border: 2px solid $color-border-light;
    background-color: transparent;
    color: #71717a; // zinc-700
    transition: all $duration-300;

    &:hover {
      border-color: $color-border-hover;
      background-color: #f9f9fa; // zinc-50

      .dark & {
        background-color: rgb(39 39 42 / 0.5); // zinc-700/50
      }
    }

    .dark & {
      border-color: $color-border-dark;
      color: $color-text-primary-dark;

      &:hover {
        border-color: $color-border-hover-dark;
      }
    }
  }

  // 取消按钮
  &.cancel {
    padding: $spacing-2 $spacing-4;
    font-size: 0.875rem; // text-sm
    color: #ef4444; // red-500
    background-color: transparent;

    &:hover {
      background-color: rgb(239 68 68 / 0.1); // red-500/10
    }

    .dark & {
      color: #fca5a5; // red-400
    }
  }

  // 确认按钮
  &.confirm {
    padding: $spacing-2 $spacing-4;
    font-size: 0.875rem; // text-sm
    background-color: $color-primary;
    color: white;

    &:hover {
      background-color: $color-primary-dark;
    }
  }
}

// 分割线
.divider {
  position: relative;
  padding: $spacing-2 0;

  .dividerLine {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;

    span {
      width: 100%;
      border-top: 1px solid $color-border-light;

      .dark & {
        border-color: $color-border-dark;
      }
    }
  }

  .dividerText {
    position: relative;
    display: flex;
    justify-content: center;
    font-size: 0.75rem; // text-xs
    text-transform: uppercase;

    span {
      background-color: $color-bg-card-light;
      padding: 0 $spacing-2;
      color: $color-text-secondary;

      .dark & {
        background-color: $color-bg-card-dark;
        color: $color-text-secondary-dark;
      }
    }
  }
}

// 历史记录抽屉
.drawer {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  width: 20rem; // w-80
  background-color: $color-bg-card-light;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2); // shadow-2xl
  border-left: 1px solid $color-border-light;
  z-index: 50;
  transition: transform $duration-300 $easing-in-out;
  transform: translateX(100%);

  &.open {
    transform: translateX(0);
  }

  &.dark {
    background-color: $color-bg-dark;
    border-color: #27272a; // zinc-800
  }

  .drawerHeader {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $spacing-4;
    border-bottom: 1px solid $color-border-light;

    &.dark {
      border-color: #27272a; // zinc-800
    }

    .drawerTitle {
      font-size: 1.125rem; // text-lg
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: $spacing-2;

      svg {
        width: 20px;
        height: 20px;
      }
    }

    .closeButton {
      padding: $spacing-1;
      background-color: transparent;
      border: none;
      cursor: pointer;
      transition: background-color $duration-300;

      &:hover {
        background-color: #f4f4f5; // zinc-100

        .dark & {
          background-color: #27272a; // zinc-800
        }
      }

      svg {
        width: 20px;
        height: 20px;
      }
    }
  }

  .drawerContent {
    overflow-y: auto;
    height: calc(100vh - 60px);
    padding: $spacing-4;
    display: flex;
    flex-direction: column;
    gap: $spacing-2;

    .emptyMessage {
      text-align: center;
      color: $color-text-secondary;
      padding: $spacing-8 0;

      .dark & {
        color: $color-text-secondary-dark;
      }
    }
  }
}

// 历史记录项
.historyItem {
  position: relative;
  background-color: #f4f4f5; // zinc-50
  border: 1px solid $color-border-light;
  border-radius: $radius-lg;
  padding: $spacing-3;
  transition: all $duration-300;
  cursor: pointer;

  &:hover {
    border-color: #3b82f6; // blue-500

    button {
      opacity: 1;
    }
  }

  &.dark {
    background-color: rgb(39 39 42 / 0.5); // zinc-800/50
    border-color: $color-border-dark;
  }

  .historyItemContent {
    width: 100%;
    text-align: left;
    padding-right: $spacing-6;

    .historyItemName {
      font-weight: 500;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .historyItemPath {
      font-size: 0.875rem; // text-xs
      color: $color-text-secondary;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      margin-top: $spacing-1;
      font-family: 'Monaco', monospace;

      .dark & {
        color: $color-text-secondary-dark;
      }
    }

    .historyItemTime {
      font-size: 0.875rem; // text-xs
      color: #a1a1aa; // zinc-400
      margin-top: $spacing-1;
    }
  }

  .deleteButton {
    position: absolute;
    top: $spacing-3;
    right: $spacing-3;
    padding: $spacing-1;
    color: $color-text-secondary;
    opacity: 0;
    transition: all $duration-300;
    background-color: transparent;
    border: none;
    cursor: pointer;

    &:hover {
      color: $color-red;
    }

    svg {
      width: 14px;
      height: 14px;
    }
  }
}

// 模态框
.modal {
  position: fixed;
  inset: 0;
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
  padding: $spacing-4;
  animation: fadeIn $duration-200;

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .modalContent {
    background-color: $color-bg-card-light;
    border: 1px solid $color-border-light;
    border-radius: $radius-xl;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); // shadow-2xl
    width: 100%;
    max-width: 28rem; // max-w-md
    overflow: hidden;
    animation: zoomIn $duration-200;

    &.dark {
      background-color: $color-bg-dark;
      border-color: $color-border-dark;
    }

    @keyframes zoomIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
  }

  .modalHeader {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $spacing-4;
    border-bottom: 1px solid $color-border-light;

    &.dark {
      border-color: $color-border-dark;
    }

    .modalTitle {
      font-size: 1.125rem; // text-lg
      font-weight: 700;
      color: $color-text-primary;

      .dark & {
        color: $color-text-primary-dark;
      }
    }

    .closeButton {
      background-color: transparent;
      border: none;
      cursor: pointer;
      color: #a1a1aa; // zinc-400
      transition: color $duration-300;

      &:hover {
        color: #71717a; // zinc-600

        .dark & {
          color: $color-text-primary-dark;
        }
      }

      svg {
        width: 20px;
        height: 20px;
      }
    }
  }

  .modalBody {
    padding: $spacing-6;
    display: flex;
    flex-direction: column;
    gap: $spacing-4;
  }
}

// 表单组
.formGroup {
  display: flex;
  flex-direction: column;
  gap: $spacing-2;

  .formLabel {
    font-size: 0.875rem; // text-sm
    font-weight: 500;
    color: #52525b; // zinc-700

    .dark & {
      color: #d4d4d8; // zinc-300
    }
  }

  .formInput {
    background-color: #f4f4f5; // zinc-50
    border: 1px solid $color-border-light;
    border-radius: $radius-lg;
    padding: $spacing-2 $spacing-3;
    color: $color-text-primary;
    transition: all $duration-300;
    font-size: 1rem;

    &:focus {
      outline: none;
      border-color: transparent;
      box-shadow: 0 0 0 2px $color-primary;
    }

    .dark & {
      background-color: #27272a; // zinc-800
      border-color: $color-border-dark;
      color: $color-text-primary-dark;
    }
  }
}

// 表单行（两列布局）
.formRow {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: $spacing-4;
}

// 响应式设计
@media (max-width: 640px) {
  .drawer {
    width: 100%;
  }

  .formRow {
    grid-template-columns: 1fr;
  }

  .actionCard {
    max-width: 100%;
  }
}
